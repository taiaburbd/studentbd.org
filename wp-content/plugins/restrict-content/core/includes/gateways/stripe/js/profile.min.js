!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){var r,n,a=document.getElementById("rcp-card-wrapper");if(a){let e=jQuery;document.getElementById("rcp-card-element")&&document.getElementById("rcp-card-element-errors")||(a.innerHTML="",(r=document.createElement("div")).id="rcp-card-element-errors",(n=document.createElement("div")).id="rcp-card-element",a.appendChild(n),a.appendChild(r)),rcpStripeUpdateElementStyles(rcpStripe.elements.card,".rcp_card_name"),rcpStripe.elements.card.mount("#rcp-card-element"),rcpStripe.elements.card.addEventListener("change",rcpStripeToggleElementErrors);let t=e('input[name="rcp_gateway_existing_payment_method"]'),c=e(".rcp-gateway-new-card-fields");t.on("change",(function(){"new"===e('input[name="rcp_gateway_existing_payment_method"]:checked').val()?c.show():c.hide()})),t.trigger("change");var i={init:function(){e(".rcp-gateway-saved-card-delete").on("click","a",i.delete)},delete:function(t){if(t.preventDefault(),!confirm(rcp_stripe_script_options.confirm_delete_card))return!1;let r=e(this),n=e("#rcp-card-element-errors");r.data("text",r.text()).text(rcp_stripe_script_options.pleasewait),n.empty(),e.ajax({type:"post",dataType:"json",url:rcp_stripe_script_options.ajaxurl,data:{action:"rcp_stripe_delete_saved_payment_method",payment_method_id:r.data("id"),nonce:r.data("nonce")},xhrFields:{withCredentials:!0},success:function(e){e.success?r.parents("li").remove():(console.log(e),n.append('<div class="rcp_message error"><p class="rcp_error"><span>'+e.data+"</span></p></div>"),r.text(r.data("text")))}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))}};i.init()}function c(e,t=""){""!==t&&void 0!==rcpStripe.errors[t]&&(e=rcpStripe.errors[t]),jQuery("#rcp_update_card_form").unblock(),rcpStripeToggleElementErrors({error:{message:e}}),jQuery("#rcp_submit").prop("disabled",!1)}var p=document.getElementById("rcp_update_card_form");p.addEventListener("submit",(function e(t){t.preventDefault();let r=document.querySelector(".rcp_card_name").value,n=jQuery("#rcp_submit"),a=jQuery("#rcp_update_card_form"),i=jQuery('input[name="rcp_gateway_existing_payment_method"]:checked').val();(i="new"!==i&&i)||""!==r?(n.prop("disabled",!0),a.block({message:rcp_stripe_script_options.pleasewait,css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}}),jQuery.ajax({type:"post",dataType:"json",url:rcp_stripe_script_options.ajaxurl,data:{action:"rcp_stripe_create_setup_intent_for_saved_card",membership_id:jQuery('input[name="rcp_membership_id"]').val(),payment_method_id:i||"new"},success:function(t){if(t.success){let d={payment_method:{card:rcpStripe.elements.card,billing_details:{name:r}}};i&&(d={payment_method:i});var n="payment_intent"===t.data.payment_intent_object?"confirmCardPayment":"confirmCardSetup";a=t.data.payment_intent_client_secret,o=d,rcpStripe.Stripe[n](a,o).then((function(r){if(r.error)c(r.error.message,r.error.code);else{r=t;let n=document.createElement("input"),a=(n.value=r.data.payment_intent_id,n.type="hidden",n.name="stripe_payment_intent_id",p.appendChild(n),document.createElement("input"));a.value=r.data.payment_intent_object,a.type="hidden",a.name="stripe_payment_intent_object",p.appendChild(a),p.removeEventListener("submit",e),p.submit()}}))}else c(t.data);var a,o}})):c(rcp_stripe_script_options.enter_card_name)}))}]);
//# sourceMappingURL=profile.min.js.map